<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>DocFX Document Schema Design Specification | DocFX website </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="DocFX Document Schema Design Specification | DocFX website ">
    <meta name="generator" content="docfx 2.21.1.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="docfx-document-schema-design-specification">DocFX Document Schema Design Specification</h1>

<h2 id="1-introduction">1. Introduction</h2>
<p>DocFX supports different <a href="../tutorial/howto_build_your_own_type_of_documentation_with_custom_plug-in.html">document processors</a> to handle different kinds of input. For now, if the data model changes a bit, a new document processor is needed, even most works in processors are the same.</p>
<p>DocFX Document Schema (abbreviated to <code>this schema</code> below) is introduced to address ths problem. This schema is a JSON media type for defining the structure of a DocFX document. This schema is intended to define manipulation, documentation, validation of the document data.</p>
<h2 id="2-conventions-and-terminology">2. Conventions and Terminology</h2>
<p>The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted as described in <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>.</p>
<h2 id="3-overview">3. Overview</h2>
<p>DocFX Document Schema is in <a href="http://www.json.org/">JSON</a> format. It borrows most syntax from <a href="http://json-schema.org/">JSON Schema</a>, while it also introduces some other syntax to manuplating the data.</p>
<h3 id="31-validation">3.1 Validation</h3>
<p>This schema can describe the structure of a DocFX document. 
<a href="http://json-schema.org/latest/json-schema-validation.html">JSON schema validation</a> already defines many keywords. This schema starts from supporting limited keyword like <code>type</code>, <code>properties</code>.</p>
<h3 id="32-manipulation">3.2 Manipulation</h3>
<p>This schema can describe how to handle each property of the document.</p>
<p>Some handler is predefined in DocFX, like markup a string using <a href="docfx_flavored_markdown.html">DFM</a>, mark a property as an uid, include content from another source, etc. </p>
<p>Some handler can be injected into the schema parsing process to accomplish some custom steps.</p>
<p><strong>TODO</strong>: add definition for handler.</p>
<h3 id="33-integration-with-docfx">3.3 Integration with DocFX</h3>
<p>Schema is passed to DocFX as part of the template. It MUST be put in the <code>schemas</code> sub folder under template folder. The file name is treated as the schema name, also known as the document type of a template.</p>
<p>For example, to add a schema for a document type <code>ManagedReference</code>, a schema file should added like <code>{templateFolder}\schemas\ManagedReference.json</code>.</p>
<p>Schema describes the object model. The format of the object model is not constrained. YAML and JSON should both be supported.</p>
<p><strong>TODO</strong>: change to use YAML Mime to determine which schema to use.</p>
<h2 id="4-general-considerations">4. General Considerations</h2>
<ul>
<li>This schema will reuse keywords in JSON schema, but will not change the defition of the existing one.</li>
<li>To distinguish with JSON schema, the new keywords introduced in this schema is prefixed with <code>d-</code>. <code>d</code> stands for DocFX.</li>
<li>This schema can validate and manipulate single elements in place, but can not move the element to another place.</li>
</ul>
<h2 id="5-validation-keywords">5. Validation keywords</h2>
<h3 id="51-type">5.1 type</h3>
<p>Same as in JSON schema: <a href="http://json-schema.org/latest/json-schema-validation.html#rfc.section.6.25">http://json-schema.org/latest/json-schema-validation.html#rfc.section.6.25</a></p>
<blockquote><p>The value of this keyword MUST be either a string or an array. If it is an array, elements of the array MUST be strings and MUST be unique.</p>
<p>String values MUST be one of the six primitive types (&quot;null&quot;, &quot;boolean&quot;, &quot;object&quot;, &quot;array&quot;, &quot;number&quot;, or &quot;string&quot;), or &quot;integer&quot; which matches any number with a zero fractional part.</p>
<p>An instance validates if and only if the instance is in any of the sets listed for this keyword.</p>
</blockquote>
<h3 id="52-properties">5.2 properties</h3>
<p>Same as in JSON schema: <a href="http://json-schema.org/latest/json-schema-validation.html#rfc.section.6.18">http://json-schema.org/latest/json-schema-validation.html#rfc.section.6.18</a></p>
<blockquote><p>The value of &quot;properties&quot; MUST be an object. Each value of this object MUST be a valid JSON Schema.</p>
<p>This keyword determines how child instances validate for objects, and does not directly validate the immediate instance itself.</p>
<p>Validation succeeds if, for each name that appears in both the instance and as a name within this keyword&#39;s value, the child instance for that name successfully validates against the corresponding schema.</p>
<p>Omitting this keyword has the same behavior as an empty object.</p>
</blockquote>
<h3 id="53-items">5.3 items</h3>
<p>Same as in JSON schema: <a href="http://json-schema.org/latest/json-schema-validation.html#rfc.section.6.9">http://json-schema.org/latest/json-schema-validation.html#rfc.section.6.9</a></p>
<blockquote><p>The value of &quot;items&quot; MUST be either a valid JSON Schema or an array of valid JSON Schemas.</p>
<p>This keyword determines how child instances validate for arrays, and does not directly validate the immediate instance itself.</p>
<p>If &quot;items&quot; is a schema, validation succeeds if all elements in the array successfully validate against that schema.</p>
<p>If &quot;items&quot; is an array of schemas, validation succeeds if each element of the instance validates against the schema at the same position, if any.</p>
<p>Omitting this keyword has the same behavior as an empty schema.</p>
</blockquote>
<h2 id="6-manipulation-keywords">6. Manipulation keywords</h2>
<h3 id="61-d-contenttype">6.1 d-contentType</h3>
<p>The value of <code>d-contentType</code> MUST be a string. It defines how DocFX will manipulate the property and affect the build context.</p>
<p>The following values are allowed:</p>
<ul>
<li><code>uid</code>: If the instance is a string, it defines a UID in the build context for reference.</li>
<li><code>fileLink</code>: If the instance is a string and in relative path, it will be converted into path from docset root, and DocFX will update the path afterward.</li>
<li><code>uidReference</code>: If the instance is a string or an array of string, it references to a UID (some UIDS) in the build context.</li>
<li><code>markdown</code>: If the instance is a string, it will be marked up and updated.</li>
<li><code>includeFile</code>: if the instance is a string and in relative path, content of the targeted file will replace it in place.</li>
<li><code>includeMarkdownFile</code>: This is same as <code>includeFile</code>, in spite of that the content will be marked up before filled in.</li>
</ul>
<p><strong>TODO</strong> add some explanation for instance: <a href="http://json-schema.org/latest/json-schema-core.html#rfc.section.4.2">http://json-schema.org/latest/json-schema-core.html#rfc.section.4.2</a></p>
<h3 id="62-d-tags">6.2 d-tags</h3>
<p>The value of this keyword MUST be either a string or an array. If it is an array, elements of the array MUST be strings and MUST be unique.</p>
<p>If a processor need to do some operations on a specified property, while the location of the property differs with schemas, it&#39;s hard to share the code.
In this case, a tag can be defined to mark the property, then the processor can fetch the instances with defined tag from schema parser, and read or modify it.</p>
<h3 id="63-d-overwrite">6.3 d-overwrite</h3>
<p>The value of &quot;overwrite&quot; MUST be a string. It specifies how DocFX uses the <a href="../tutorial/intro_overwrite_files.html">overwrite files</a> to overwrite the existing values.</p>
<p>The following values are allowed:</p>
<ul>
<li><code>replace</code>: The value will be overwitten by the one specified in overwrite files.</li>
<li><code>key</code>: If the instance is a string, it will be used as the key of the current object. It can be used to identify the object to overwrite in an array.</li>
<li><code>merge</code>: If the instance is an object, it will be merged with the one in overwrite files. If there are duplicated keys, the one in overwrite files will overwrite the existing one.</li>
<li><code>ignore</code>: Mark the current instance cannot be overwritten.</li>
</ul>
<p>For <code>object</code> and <code>array</code> type, the default behavior is <code>merge</code>. For other types, the default behavior is <code>replace</code>.</p>
<div class="NOTE"><h5>Note</h5><p>After applying the overwrite files, the model should be checked again to ensure that all the validation rules still satisfy.</p>
</div>
<h2 id="7-extension-keywords">7. Extension Keywords</h2>
<p>While this schema defines some keywords for DocFX use, additional keywords can be added above it. </p>
<p>The extension keywords are RECOMMENDED to has the form <code>{an charactor other than &quot;d&quot;}-{keyword}</code>, so that it can be easily distinguished from keywords defined in this schema and JSON schema. They can have any valid JSON format value.</p>
<h2 id="8-samples">8. Samples</h2>
<p>Here&#39;s an sample of the schema. Assume we have the following YAML file:</p>
<pre><code class="lang-yaml">title: Web Apps Documentation
metadata:
  title: Azure Web Apps Documentation - Tutorials, API Reference
  meta.description: Learn how to use App Service Web Apps to build and host websites and web applications.
  services: app-service
  author: apexprodleads
  manager: carolz
  ms.service: app-service
  ms.tgt_pltfrm: na
  ms.devlang: na
  ms.topic: landing-page
  ms.date: 01/23/2017
  ms.author: carolz
sections:
- title: 5-Minute Quickstarts
  children:
  - text: .NET
    href: app-service-web-get-started-dotnet.md
  - text: Node.js
    href: app-service-web-get-started-nodejs.md
  - text: PHP
    href: app-service-web-get-started-php.md
  - text: Java
    href: app-service-web-get-started-java.md
  - text: Python
    href: app-service-web-get-started-python.md
  - text: HTML
    href: app-service-web-get-started-html.md
- title: Step-by-Step Tutorials
  children:
  - content: &quot;Create an application using [.NET with Azure SQL DB](app-service-web-tutorial-dotnet-sqldatabase.md) or [Node.js with MongoDB](app-service-web-tutorial-nodejs-mongodb-app.md)&quot;
  - content: &quot;[Map an existing custom domain to your application](app-service-web-tutorial-custom-domain.md)&quot;
  - content: &quot;[Bind an existing SSL certificate to your application](app-service-web-tutorial-custom-SSL.md)&quot;
</code></pre><p>In this sample, we want to use the JSON schema to describe the overall model structure. Further more, the <code>href</code> is a file link. It need to be resolved from the relative path to the final href. The <code>content</code> property need to be marked up as a Markdown string. The <code>metadata</code> need to be tagged for further custom operations. We want to use <code>setion</code>&#39;s <code>title</code> as the key for overwrite <code>section</code> array.</p>
<p>Here&#39;s the schema to describe these operations:</p>
<pre><code class="lang-json">{
    &quot;type&quot;: &quot;object&quot;,
    &quot;properties&quot;: {
        &quot;metadata&quot;: {
            &quot;type&quot;: &quot;object&quot;,
            &quot;d-tags&quot;: &quot;metadata&quot;
        },
        &quot;sections&quot;: {
            &quot;type&quot;: &quot;array&quot;,
            &quot;items&quot;: {
                &quot;type&quot;: &quot;object&quot;,
                &quot;properties&quot;: {
                    &quot;children&quot;: {
                        &quot;type&quot;: &quot;array&quot;,
                        &quot;items&quot;: {
                            &quot;type&quot;: &quot;object&quot;,
                            &quot;properties&quot;: {
                                &quot;href&quot;: {
                                    &quot;type&quot;: &quot;string&quot;,
                                    &quot;d-contentType&quot;: &quot;fileLink&quot;
                                },
                                &quot;text&quot;: {
                                    &quot;type&quot;: &quot;string&quot;
                                },
                                &quot;content&quot;: {
                                    &quot;type&quot;: &quot;string&quot;,
                                    &quot;d-contentType&quot;: &quot;markup&quot;
                                }
                            }
                        }
                    },
                    &quot;title&quot;: {
                        &quot;type&quot;: &quot;string&quot;,
                        &quot;d-overwrite&quot;: &quot;key&quot;
                    }
                }
            }
        },
        &quot;title&quot;: {
            &quot;type&quot;: &quot;string&quot;
        }
    }
}
</code></pre><div id="disqus_thread"></div>
                <script>
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://docfx-github.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/dotnet/docfx/blob/dev/Documentation/spec/docfx_document_schema.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                  <li>
                    <a href="#disqus_thread" class="contribution-link">0 Comments</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script id="dsq-count-scr" src="//docfx-github.disqus.com/count.js" async=""></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-99241001-1', 'auto');
      ga('send', 'pageview');
    
    </script>
  </body>
</html>
